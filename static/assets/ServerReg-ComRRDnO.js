import{t as e}from"./css-CYq48aYZ.js";import{t}from"./Countdown-ChoBioFq.js";import{Bt as n,Gt as r,Ot as i,Qt as a,_t as o,d as s,f as c,gt as l,in as u,kt as d,pt as f,qt as p,tn as m,ut as h,vt as g}from"./main-DLAKPujJ.js";/* empty css            */import{n as _}from"./namespace-dpJnOkIB.js";/* empty css            *//* empty css            */import{t as v}from"./SpaceGap-CIjk4lfa.js";/* empty css            *//* empty css            *//* empty css            *//* empty css            *//* empty css            */import{t as y}from"./GridRow-BmMdcQMJ.js";import"./IconRemixTemp-DeAFsH1z.js";import{t as b}from"./ViewIconBtn-DqZlxRSL.js";import{t as x}from"./ServerRegView-yRDQ5k3V.js";import{t as S}from"./dot-D1vB4RK9.js";var C={key:0,class:`d-success`},w={key:1,class:`d-danger`},T={__name:`ServerReg`,setup(u){let T=p(null),E=p(),D=r({namespace:_}),O=p([]),k=async()=>{D.namespace=_,O.value=await $post(`natsjob/api/console/server-reg`,D)};i(()=>{k()});let A=()=>{k(),T.value?.reset()},j=e=>{console.log(e),console.log(e.systemInfo),E.value.view(e.systemInfo)};return(r,i)=>{let u=t,p=v,_=c,D=S,M=b,N=y,P=s,F=e,I=x;return d(),l(h,null,[g(F,{title:`服务端注册`},{"header-extra":n(()=>[g(u,{ref_key:`countdown`,ref:T,duration:1e4,active:!0,"on-finish":A},null,512),g(p),f(`i`,{class:`ri-loop-left-ai-line ri-lg`,style:{cursor:`pointer`},onClick:k})]),default:n(()=>[g(P,{"highlight-current-row":``,data:a(O),border:``,height:500},{default:n(()=>[g(_,{prop:`ip`,label:`ip`,"min-width":`120`,"show-overflow-tooltip":``},{default:n(({row:e})=>[o(m(e.systemInfo.machineIp),1)]),_:1}),g(_,{prop:`ipMaster`,label:`节点类型`,"min-width":`100`,"show-overflow-tooltip":``},{default:n(({row:e})=>[e.isMaster?(d(),l(`div`,C,[g(D,{type:`success`}),i[0]||=o(` 主节点 `,-1)])):(d(),l(`div`,w,[g(D,{type:`danger`}),i[1]||=o(` 从节点 `,-1)]))]),_:1}),g(_,{prop:`id`,label:`id`,"min-width":`100`,"show-overflow-tooltip":``}),g(_,{prop:`cpu`,label:`cpu`,"min-width":`120`,"show-overflow-tooltip":``},{default:n(({row:e})=>[o(m(e.systemInfo.processCpuUsage),1)]),_:1}),g(_,{prop:`memeory`,label:`内存`,"min-width":`120`,"show-overflow-tooltip":``},{default:n(({row:e})=>[o(m(e.systemInfo.processMemoryRss),1)]),_:1}),g(_,{prop:`startTime`,label:`开始时间`,"min-width":`180`}),g(_,{prop:`updateTime`,label:`更新时间`,"min-width":`180`}),g(_,{fixed:`right`,label:`操作`,width:`60`},{default:n(({row:e})=>[g(N,{span:1},{default:n(()=>[g(M,{onClick:t=>j(e)},null,8,[`onClick`])]),_:2},1024)]),_:1})]),_:1},8,[`data`])]),_:1}),g(I,{ref_key:`viewRef`,ref:E},null,512)],64)}}};export{T as default};