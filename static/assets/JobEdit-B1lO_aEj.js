import{B as e,Bt as t,E as n,Gt as r,I as i,Qt as a,Rt as o,Ut as s,_t as c,b as l,ht as u,in as d,kt as f,mt as p,pt as m,qt as h,tn as g,v as _,vt as v,y,yt as b}from"./main-DLAKPujJ.js";import{t as x}from"./_plugin-vue_export-helper-DAAOZMkq.js";/* empty css            *//* empty css            *//* empty css            *//* empty css            *//* empty css            *//* empty css            *//* empty css            *//* empty css            */import{t as S}from"./GridRow-BmMdcQMJ.js";import C from"./JobCategory-BVmTD-_L.js";import{t as w}from"./JobCondition-CSVKuKsX.js";import T from"./JobModel-CfdVGzI7.js";import E from"./JobStatus-BqjBH-r5.js";var D={class:`dialog-footer`},O=b({name:`AppEdit`}),k=x(Object.assign(O,{emits:[`load`],setup(d,{expose:b,emit:x}){let O=h(!1),k=x,A=h(!1),j=()=>{O.value=!1,k(`load`)},{useFormSave:M,useFormCreate:N,useFormUpdate:P,form:F,formRef:I,useFormById:L}=useForm({api:`natsjob/api/app-job`,formFields:{id:null,name:null,description:null,namespaceId:null,appId:null,category:``,model:``,status:0,cron:`@every 10s`,maxWorkers:1,timeoutSeconds:10,condition:``,args:``}}),R=r({name:useRule(),status:useRule(),description:useRule(),category:useRule(),model:useRule(),cron:useRule()}),z=(e={})=>{A.value=!1,L(),F.namespaceId=e.namespaceId,F.appId=e.appId,O.value=!0},B=async e=>{A.value=!0,L(e.id),O.value=!0},V=async()=>{A.value?await P({onSuccess:e=>{j()}}):await N({onSuccess:e=>{j()}})};return b({createData:z,editData:B}),o(F,(e,t)=>{F.category==`map`&&F.model==`ultra`&&(F.model=``),F.category==`standalone`&&F.model==`ultra`||(F.condition=``)}),(r,o)=>{let d=l,h=C,b=T,x=S,k=e,A=E,j=_,M=y,N=i,P=n;return f(),p(P,{modelValue:a(O),"onUpdate:modelValue":o[12]||=e=>s(O)?O.value=e:null,title:`数据编辑`,width:`40%`,draggable:``,"destroy-on-close":``,center:``},{footer:t(()=>[m(`span`,D,[v(N,{onClick:o[11]||=e=>O.value=!1},{default:t(()=>[...o[13]||=[c(`取消`,-1)]]),_:1}),v(N,{type:`primary`,onClick:V},{default:t(()=>[...o[14]||=[c(` 保存 `,-1)]]),_:1})])]),default:t(()=>[v(M,{model:a(F),rules:a(R),ref_key:`formRef`,ref:I,"label-width":`100px`},{default:t(()=>[v(d,{label:`编号`,prop:`id`},{default:t(()=>[c(g(a(F).id),1)]),_:1}),v(x,null,{default:t(()=>[v(d,{label:`分类`,prop:`category`},{default:t(()=>[v(h,{modelValue:a(F).category,"onUpdate:modelValue":o[0]||=e=>a(F).category=e},null,8,[`modelValue`])]),_:1}),v(d,{label:`模式`,prop:`model`},{default:t(()=>[v(b,{modelValue:a(F).model,"onUpdate:modelValue":o[1]||=e=>a(F).model=e,category:a(F).category,"onUpdate:category":o[2]||=e=>a(F).category=e},null,8,[`modelValue`,`category`])]),_:1})]),_:1}),v(d,{label:`任务名`,prop:`name`},{default:t(()=>[v(k,{modelValue:a(F).name,"onUpdate:modelValue":o[3]||=e=>a(F).name=e,modelModifiers:{trim:!0},autocomplete:`off`,maxlength:`64`,"show-word-limit":``},null,8,[`modelValue`])]),_:1}),v(d,{label:`说明`,prop:`description`},{default:t(()=>[v(k,{modelValue:a(F).description,"onUpdate:modelValue":o[4]||=e=>a(F).description=e,modelModifiers:{trim:!0},autocomplete:`off`,maxlength:`64`,"show-word-limit":``},null,8,[`modelValue`])]),_:1}),v(d,{label:`状态`,prop:`status`},{default:t(()=>[v(A,{modelValue:a(F).status,"onUpdate:modelValue":o[5]||=e=>a(F).status=e},null,8,[`modelValue`])]),_:1}),v(x,null,{default:t(()=>[v(d,{label:`定时`,prop:`cron`},{default:t(()=>[v(k,{modelValue:a(F).cron,"onUpdate:modelValue":o[6]||=e=>a(F).cron=e,modelModifiers:{trim:!0},autocomplete:`off`,maxlength:`64`},null,8,[`modelValue`])]),_:1}),a(F).category==`standalone`&&a(F).model==`ultra`?(f(),p(d,{key:0,label:`条件`,prop:`condition`},{default:t(()=>[v(w,{modelValue:a(F).condition,"onUpdate:modelValue":o[7]||=e=>a(F).condition=e},null,8,[`modelValue`])]),_:1})):u(``,!0)]),_:1}),a(F).model!=`lite`&&a(F).model!=`plus`?(f(),p(x,{key:0},{default:t(()=>[v(d,{label:`最大并发`,prop:`maxWorkers`},{default:t(()=>[v(j,{modelValue:a(F).maxWorkers,"onUpdate:modelValue":o[8]||=e=>a(F).maxWorkers=e,min:1,max:1e4},null,8,[`modelValue`])]),_:1}),v(d,{label:`超时时间(秒)`,prop:`timeoutSeconds`},{default:t(()=>[v(j,{modelValue:a(F).timeoutSeconds,"onUpdate:modelValue":o[9]||=e=>a(F).timeoutSeconds=e,min:1,max:86400},null,8,[`modelValue`])]),_:1})]),_:1})):u(``,!0),v(d,{label:`参数`,prop:`args`},{default:t(()=>[v(k,{type:`textarea`,modelValue:a(F).args,"onUpdate:modelValue":o[10]||=e=>a(F).args=e,modelModifiers:{trim:!0},autocomplete:`off`,maxlength:`1000`,"show-word-limit":``},null,8,[`modelValue`])]),_:1}),v(x,null,{default:t(()=>[v(d,{label:`创建日期`},{default:t(()=>[c(g(a(F).createdAt),1)]),_:1}),v(d,{label:`更新日期`},{default:t(()=>[c(g(a(F).updatedAt),1)]),_:1})]),_:1})]),_:1},8,[`model`,`rules`])]),_:1},8,[`modelValue`])}}}),[[`__scopeId`,`data-v-81e9fc78`]]);export{k as default};